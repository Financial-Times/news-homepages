name: Commit
description: Save the latest screenshots

inputs:
  s3-access-key-id:
    description: An API key with permission to post to Amazon S3
    required: true
  s3-secret-access-key:
    description: An API secret with permission to post to Amazon S3
    required: true
  s3-bucket-name:
    description: The identifier of the target Amazon S3 bucket
    required: true

runs:
  using: "composite"
  steps:
    - id: install
      name: Install Python dependencies
      uses: ./.github/actions/install

    - uses: actions/download-artifact@v3
      with:
        name: screenshots
        path: ./latest-screenshots

    - uses: shallwefootball/s3-upload-action@master
      with:
        aws_key_id: ${{ inputs.s3-access-key-id }}
        aws_secret_access_key: ${{ inputs.s3-secret-access-key }}
        aws_bucket: ${{ inputs.s3-bucket-name }}
        source_dir: './latest-screenshots/'
        destination_dir: "./latest-screenshots/"
